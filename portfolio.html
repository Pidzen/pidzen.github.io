<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Portfolio — Pierre Mordin</title>
<meta name="description" content="Portfolio de sculptures — diaporamas par pièce, photos regroupées par œuvre.">
<style>
  :root{--bg:#0f0f10;--card:#161617;--muted:#9aa0a6;--accent:#b6a19b}
  *{box-sizing:border-box}
  body{margin:0;font-family:Inter,system-ui,Segoe UI,Arial;color:#eee;background:var(--bg);line-height:1.4}
  .wrap{max-width:1200px;margin:0 auto;padding:28px 20px}
  h1{font-size:28px;text-align:center;margin-bottom:6px}
  p.lead{color:var(--muted);text-align:center;margin-top:0;margin-bottom:24px}

  .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:20px}
  .card{background:linear-gradient(180deg,rgba(255,255,255,.02),transparent);padding:14px;border-radius:10px;display:flex;flex-direction:column;align-items:center}
  .slideshow{width:220px;height:220px;border-radius:8px;background:#0c0c0c;overflow:hidden;display:flex;align-items:center;justify-content:center;position:relative}
  .slideshow img{max-width:100%;max-height:100%;object-fit:contain;display:block;pointer-events:none;user-drag:none}
  .caption{padding-top:10px;color:var(--muted);text-align:center;font-size:14px}

  /* lightbox */
  #lightbox{position:fixed;inset:0;background:rgba(0,0,0,0.88);display:none;align-items:center;justify-content:center;z-index:9999}
  #lightbox .inner{position:relative;max-width:92%;max-height:92%;display:flex;align-items:center;justify-content:center}
  #lightbox img{max-width:100%;max-height:100%;border-radius:8px;box-shadow:0 0 30px rgba(0,0,0,.7)}
  #lightbox .close{position:absolute;top:8px;right:8px;color:#fff;background:rgba(0,0,0,.4);border-radius:6px;padding:6px;cursor:pointer}
  #lightbox .nav{position:absolute;top:50%;transform:translateY(-50%);color:#fff;font-size:28px;cursor:pointer;padding:12px;background:rgba(0,0,0,.35);border-radius:8px}
  #lightbox .prev{left:12px}
  #lightbox .next{right:12px}

  /* hover effects */
  .slideshow:hover{transform:scale(1.02)}
  .card{transition:transform .25s ease,box-shadow .25s ease}
  .card:hover{transform:translateY(-6px);box-shadow:0 12px 30px rgba(0,0,0,.6)}

  @media(max-width:700px){.slideshow{width:180px;height:180px}}
</style>
</head>
<body>
<div class="wrap">
  <h1>Portfolio — Sculptures</h1>
  <p class="lead">Diaporamas par sculpture — images regroupées. Slides automatiques (1.2s). Clique pour agrandir.</p>

  <div class="grid" id="portfolioGrid">
    <!-- Cards will be injected here -->
  </div>
</div>

<!-- Lightbox -->
<div id="lightbox" aria-hidden="true">
  <div class="inner">
    <div class="close" id="lbClose">✕</div>
    <div class="nav prev" id="lbPrev">◀</div>
    <img id="lbImg" src="" alt="">
    <div class="nav next" id="lbNext">▶</div>
  </div>
</div>

<script>
// Data: groups exactly as you provided
const galleryData = [
  {title: "Ragnar L.", files: ['c0009.jpg','c0045.jpg','c0043.jpg','c007.jpg','c0107.jpg','c0023.jpg','c0025.jpg','c004.jpg','c0031.jpg','c005.jpg','c006.jpg','c038.jpg']},
  {title: "Plantes Xénomorphes", files: ['3 (2).png','qq0056.jpg','IMG-20250419-WA0006.jpg']},
  {title: "Alice Grunge", files: ['0007.jpg','0001.jpg','0005.jpg','a01.jpg','a03.jpg','0008.jpg']},
  {title: "Chtulhu", files: ['a01.png','a08.jpg','a09.jpg','a10.jpg','a12.jpg']},
  {title: "Pyramid Head", files: ['qs0097.jpg','a14.jpg','a13.jpg','a15.jpg']},
  {title: "Edda IronMaiden Tribute", files: ['6.jpg','7.jpg','8..jpg']},
  {title: "Amazone", files: ['q08.jpg','q14.jpg','q020.jpg','q031.jpg','q026.jpg','q035.jpg','q0043.jpg','q057.jpg','q066.jpg']},
  {title: "Alice Madness", files: ['A0108.jpg','A0106.jpg','A0107.jpg','A0122.jpg','A0110.jpg']},
  {title: "Bébé Game of Throne", files: ['9_Gallery.jpg','4_Gallery.jpg','8_Gallery.jpg','allery.jpg','aa0089.jpg','qs81.jpg','a16.jpg']},
  {title: "Dark princess", files: ['33.jpg','A0002d.jpg','dd51.jpg','44.jpg','A0001.jpg','A0002.jpg']},
  {title: "Vrac", files: ['_Gallery.jpg','a18.jpg','00.jpg','a17.jpg','008.jpg','904_Gallery.jpg','qs087.jpg','3.png','qq0072.jpg','WA0003.jpg','008.jpg']},
  {title: "Vrac finalisé", files: ['007.jpg','d0010.jpg','09.jpg','15733.jpg','a02.jpg','a04.jpg','a21.jpg','a22.jpg','a23.jpg','a24.jpg','guizjedi.png','WA08.jpg','WA09.jpg','WA010.jpg']}
];

// base path where images live
const basePath = 'assets/i/'; // adjust if needed

// create cards
const grid = document.getElementById('portfolioGrid');

galleryData.forEach((group, gidx) => {
  const card = document.createElement('div');
  card.className = 'card';

  const slide = document.createElement('div');
  slide.className = 'slideshow';
  slide.setAttribute('data-group', gidx);

  const img = document.createElement('img');
  img.alt = group.title;
  img.src = '';
  slide.appendChild(img);

  // caption
  const cap = document.createElement('div');
  cap.className = 'caption';
  cap.innerHTML = `<strong>${group.title}</strong>`;

  card.appendChild(slide);
  card.appendChild(cap);
  grid.appendChild(card);

  // slideshow state
  slide._files = group.files.slice();
  slide._i = 0;
  // pre-encode filenames to ensure spaces work
  slide._files = slide._files.map(f=>encodeURI(basePath + f));
  img.src = slide._files[0];

  // autoplay
  let interval = null;
  const start = ()=>{
    interval = setInterval(()=>{
      slide._i = (slide._i + 1) % slide._files.length;
      img.src = slide._files[slide._i];
    }, 1200);
  };
  const stop = ()=>{ if(interval){clearInterval(interval); interval=null} };
  start();

  // pause on hover
  slide.addEventListener('mouseenter', stop);
  slide.addEventListener('mouseleave', start);

  // click opens lightbox at group idx
  slide.addEventListener('click', ()=> openLightbox(gidx, slide._i));
});

// Lightbox logic
const lightbox = document.getElementById('lightbox');
const lbImg = document.getElementById('lbImg');
const lbClose = document.getElementById('lbClose');
const lbPrev = document.getElementById('lbPrev');
const lbNext = document.getElementById('lbNext');
let lbGroup = 0, lbIndex = 0;

function openLightbox(gidx, idx){
  lbGroup = gidx; lbIndex = idx || 0;
  const files = galleryData[lbGroup].files.map(f=>encodeURI(basePath+f));
  lbImg.src = files[lbIndex];
  lightbox.style.display = 'flex';
  lightbox.setAttribute('aria-hidden','false');
}
function closeLightbox(){ lightbox.style.display='none'; lightbox.setAttribute('aria-hidden','true'); }
function prevLightbox(){
  const files = galleryData[lbGroup].files.map(f=>encodeURI(basePath+f));
  lbIndex = (lbIndex -1 + files.length) % files.length;
  lbImg.src = files[lbIndex];
}
function nextLightbox(){
  const files = galleryData[lbGroup].files.map(f=>encodeURI(basePath+f));
  lbIndex = (lbIndex +1) % files.length;
  lbImg.src = files[lbIndex];
}

lbClose.addEventListener('click', closeLightbox);
lbPrev.addEventListener('click', prevLightbox);
lbNext.addEventListener('click', nextLightbox);

// close when clicking outside image
lightbox.addEventListener('click', (e)=>{ if(e.target===lightbox) closeLightbox(); });

// keyboard navigation
document.addEventListener('keydown', (e)=>{
  if(lightbox.style.display==='flex'){
    if(e.key==='ArrowLeft') prevLightbox();
    if(e.key==='ArrowRight') nextLightbox();
    if(e.key==='Escape') closeLightbox();
  }
});

// disable drag & right click for images
document.addEventListener('contextmenu', e=>e.preventDefault());
document.addEventListener('dragstart', e=>{ if(e.target.tagName==='IMG') e.preventDefault(); });

</script>
</body>
</html>
